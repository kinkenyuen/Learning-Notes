HTTP使用的认证方式有：

* BASIC认证 (基本认证)
* DIGEST认证 (摘要认证)
* SSL客户端认证
* FormBase认证 (基于表单认证)

BASIC、DIGEST认证适用范围受限，就不展开描述

# SSL客户端认证

SSL客户端认证是借由HTTPS的客户端证书完成认证的方式，凭借客户端证书认证，服务器可确认访问是否来自已登录的客户端

为达到SSL客户端认证的目的，需要事先将客户端证书分发给客户端，且客户端必须安装此证书

1. 服务器接收到需要认证资源的请求，服务器会发送Certificate Request报文，要求客户端提供客户端证书
2. 用户选择将发送的客户端证书后，客户端会把客户端证书信息以Client Certificate报文方式发送给服务器
3. 服务器验证客户端证书，验证通过后使用证书内的客户端公开密钥，然后开始HTTPS加密通信

在多数情况下，SSL客户端认证不会仅依靠证书完成认证，一般会和基于表单认证组合形成一种双因素认证来使用。所谓双因素认证就是指，认证过程中不仅需要密码这一个因素，还需要申请认证者提供其他持有信息，从而作为另一个因素，与其组合使用的认证方式

**换言之，第一个认证因素的SSL客户端证书用来认证客户端计算机，另一个认证因素的密码则用来确定这是用户本人的行为**

通过双因素认证后，就可以确认是用户本人正在使用匹配正确的计算机访问服务器

---

使用SSL客户端认证需要用到客户端证书，而证书需要支付一定费用才能使用，费用是指从认证机构购买客户端证书的费用，以及服务器运营者为保证自己搭建的认证机构安全运营所产生的费用

# 基于表单认证

基于表单的认证方法并不是HTTP协议中定义的。**客户端会向服务器上的Web应用程序发送登录信息(Credential)，按登录信息的验证结果验证**

多数情况下，输入已事先登录的用户ID和密码等登录信息后，发送给Web应用程序，基于认证结果来决定认证是否成功

由于使用上的便利性及安全性问题，HTTP协议标准提供的BASIC认证和DIGEST认证几乎不怎么使用。另外，SSL客户端认证虽然具有高强度的安全等级，但因为导入及维持费用等问题，也还不算特别普及

像SSH和FTP协议，服务器与客户端之间的认证是合乎标准规范的，并且满足了最基本的功能需求上的安全使用级别，因此这些协议的认证可以拿来直接使用。但是对于Web网站的认证功能，能够满足其安全使用级别的标准规范并不存在，所以只好使用由Web应用程序各自实现基于表单的认证方式

## Session管理及Cookie应用

基于表单认证的标准规范尚未有定论，一般会使用Cookie来管理Seesion(会话)

基于表单认证本身是通过服务器端的Web应用，将客户端发送过来的用户ID和密码与之前登陆过的信息做匹配来进行认证

但鉴于HTTP是无状态协议，之前已认证成功的用户状态无法通过协议层面保存下来。即，无法实现状态管理，因此即使当该用户下一次继续访问，也无法区分他与其他的用户，于是我们会使用Cookie来管理Session，以弥补HTTP协议中不存在的状态管理功能

1. 客户端把用户ID和密码等登录信息放入报文的实体部分，通常是以POST方法把请求发送给服务器。而这时，会使用HTTPS通信来进行HTML表单画面的显示和用户输入数据的发送
2. 服务器会发放用以识别用户的Session ID，通过验证从客户端发送过来的登录信息进行身份认证，然后把用户的认证状态与Session ID绑定后记录在服务器端。向客户端返回响应时，会在首部字段Set-Cookie内写入Session ID(可以把Sesion ID想象成一种用以区分不同用户的等位号)。然而，如果Session ID被第三方盗走，对方就可以伪装成你的身份进行恶意操作，因此必须防止Session ID被盗，或被猜出。为了做到这点，Session ID应使用难以推测的字符串，切服务器端也需要进行有效期的管理，保证其安全性。
3. 客户端收到服务器返回的Seesion ID后，会将其作为Cookie保存在本地。下次向服务器发送请求时，浏览器会自动发送Cookie，所以Session ID也随之发送到服务器。服务器端验证收到的Seesion ID识别用户和其认证状态

事实上，还有很多其他不同方法的案例

不仅基于表单认证的登录信息及认证过程都无标准化的方法，服务器端应如何保存用户提交的密码等登录信息等也没有标准化

通常，一种安全的保存方法是，先利用给密码加盐(salt)的方式增加额外信息，再使用散列(hash)函数计算出散列值后保存


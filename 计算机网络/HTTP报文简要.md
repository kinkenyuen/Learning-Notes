HTTP协议交互传输的信息称为HTTP报文

HTTP报文本身是由多行(用CR+LF作换行符)数据构成的字符串文本

HTTP报文分为**报文首部**(header)和**报文主体**(body)，由空行(CR+LF)来划分

<div align="center">    
<img src="./imgs/HTTP报文.jpg" width="50%" height="50%">
</div>

## 报文结构

<div align="center">    
<img src="./imgs/HTTP请求报文首部.jpg" width="50%" height="50%">
</div>

<div align="center">    
<img src="./imgs/HTTP响应报文首部.jpg" width="50%" height="50%">
</div>
* 请求行：包含请求方法，请求URI和HTTP版本
* 状态行：包含表明响应结果的状态码，原因短语和HTTP版本
* 首部字段：包含表示请求和响应的各种条件和属性的各类首部

一般有4种首部，分别是通用首部、请求首部、响应首部和实体首部

## 编码传输

HTTP在传输数据时可以按照数据原文直接传输，也可以以特定的编码方式提升传输效率

### 报文主体和实体的差异

* 报文

  是HTTP通信的基本单位，由8位比特的字节流组成，通过HTTP通信传输

* 实体

  作为请求或响应的有效载荷数据被传输，其内容由实体首部和实体主体组成

HTTP报文的主体用于传输请求或响应的实体主体

通常，报文主体等于实体主体，只有当传输中进行编码操作时，实体主体的内容发生变化，才导致它和报文主体产生差异

通俗理解：以传输一张图片为例，图片本身被称为实体主体，再传输时，图片经过编码称为报文主体。

### 内容编码

内容编码指明应用在实体内容上的编码格式，并保持实体信息原样进行压缩，**内容编码后的实体由客户端接收并负责解码**

常用的内容编码有以下:

* gzip (GNU zip)
* compress (UNIX系统的标准压缩)
* deflate（zlib）

* identity（不进行编码）

### 分块传输(Chunked Transfer Coding

在HTTP通信过程中，请求的编码实体资源尚未全部传输完成之前，浏览器无法显示请求的内容。在分块传输大容量数据时，可以通过将数据分割成多块，让浏览器逐步显示页面

分块传输编码将实体主体分成多个部分(块)，每一块用十六进制来标记块的长度，最后一块使用"0(CR+LF)"来标记

使用分块传输编码的实体主体会由接收到的客户端负责解码，恢复到编码前的实体主体


# 目录
   * [网络应用程序体系结构](#网络应用程序体系结构)
   * [进程间通信](#进程间通信)
      * [客户和服务器进程](#客户和服务器进程)
      * [进程与计算机网络之间的接口](#进程与计算机网络之间的接口)
      * [进程寻址](#进程寻址)
   * [应用层使用的运输服务](#应用层使用的运输服务)
      * [可靠数据传输](#可靠数据传输)
      * [吞吐量](#吞吐量)
      * [定时](#定时)
      * [安全性](#安全性)
   * [应用层协议](#应用层协议)
       * [HTTP协议](#http协议)
       * [SMTP协议](#smtp协议)
       * [DNS服务](#dns服务)

# 网络应用程序体系结构

* 客户-服务器体系结构

  一个典型的例子就是Web应用程序，Web服务器总是打开的，为来自浏览器（运行在客户设备）的请求提供服务

* P2P体积结构

  结构为主机（不是服务器那种类型）之间直接通信，因为这些主机不必通过专门的服务器，所以被称为对等方。许多目前流行的、流量密集型应用都是P2P体系结构，包括文件共享（BitTorrent）、对等方协助下载加速器（迅雷）、因特网电话和视频会议（Skype）

# 进程间通信

运行在端系统上的网络应用程序，需要互相通信，用操作系统的术语来讲，实际上是 **进程（process）** 而不是程序在通信

在两个不同端系统上的进程，通过跨越计算机网络交换 **报文（message）** 而相互通信，发送进程生成并向网络中发送报文；接收进程接收这些报文并可能通过回送报文进行响应

## 客户和服务器进程

在Web应用程序中，客户浏览器充当客户进程，Web服务器充当服务器进程，它们彼此交换报文。对每对通信进程，通常将其标识为客户（client）和服务器（server）

在一对进程之间的通信会话场景中，发起通信的进程被标识为客户，在会话开始时等待联系的进程是服务器

## 进程与计算机网络之间的接口

进程与计算机网络之间的接口，称为**套接字(socket)**

当进程想向另外一台主机上的另一个进程发送报文时，它把报文交付给socket，socket将报文传送到目的进程

## 进程寻址

简单而言，就是进程之间怎么找到对方，上面提到的socket是通过 **IP地址（IP address）** 和 **端口号（port number）** 来找到网络上的唯一主机上的唯一进程

# 应用层使用的运输服务

不在这里详细展开，只简单描述一下，放到运输层里面详细描述

应用层通常需要使用运输层提供的服务，大体上从四个方面对运输层的服务进行分类：可靠数据传输、吞吐量、定时和安全性

## 可靠数据传输

由于分组可能会在路由器中出现丢失的情况，所以对于那些准确传输数据的应用，如电子邮件、文件传输、Web文档传输以及金融应用等，必须为其提供可靠数据传输服务。**运输层的TCP协议能够向应用程序提供可靠数据传输**

对于那些**容忍丢失的应用（loss-tolerant application）**，如会话音频/视频，它们能够承受一定量的数据丢失。**运输层的UDP协议可提供该类服务**

## 吞吐量

可用吞吐量指发送进程能够向接收进程交付bit的速率

具有吞吐量要求的应用程序被称为**带宽敏感的应用**，而 **弹性应用** 能够根据当时可用的带宽或多或少地利用可供使用的吞吐量。电子邮件、文件传输以及Web传送都属于弹性应用

## 定时

运输层协议也能提供定时保证，具体如何实现不在此展开，一个例子是：发送方交给socket的每个bit到达接收方的socket不高于100ms，这种需求在那些交互式实时应用程序很常见，如因特网电话、电话会议、联机网络游戏等

## 安全性

运输协议提供一种或多种安全性服务，如，在发送主机中，运输协议能够加密发送进程传出的数据，在接收主机中，运输协议能够在数据交付给接收进程之前解密这些数据。

# 应用层协议

应用层协议（application-layer protocol）定义了运行在不同端系统上的应用程序进程如何相互传递报文，它定义了：

* 交换的报文类型
* 各种报文类型的语法，如报文中的各字段如何组织
* 字段的语义
* 确定一个进程何时以及如何发送报文，对报文进行响应的规则

### HTTP协议

跳转到笔记[HTTP](https://github.com/kinkenyuen/Learning-Notes#http)

### SMTP协议

因特网电子邮件的一个协议，电子邮件主要由 **用户代理（user agent）** 、**邮件服务器（mail server）** 和 **简单邮件传输协议（Simple Mail Transfer Protocol，SMTP）** 组成

邮件用户代理 (MUA) 是一个用于收发邮件的应用程序

邮件服务器，即处理邮件报文的服务器

一个典型的邮件发送过程是：从发送方的用户代理开始，传输到发送方的邮件服务器，再传输到接收方的邮件服务器，然后在接收方的邮件服务器分发邮件到接收方的邮箱中

SMTP协议使用使用TCP可靠数据传输服务，SMTP像大多数应用层协议一样，有两部分：运行在发送方邮件服务器的客户端和运行在接收方邮件服务器的服务器端。每台邮件服务器上既运行SMTP客户端也运行SMTP服务器端。当一个邮件服务器向其他邮件服务器发送邮件时，它就表现为SMTP客户；当邮件服务器从其他邮件服务器上接收邮件时，它就表现为一个SMTP的服务器

假设Alice想给Bob发送一封简单的ASCII报文，SMTP操作过程如下：

1. Alice调用她的邮件代理程序并提供Bob的邮件地址，撰写报文，然后指示用户代理发送报文
2. Alice的用户代理把报文发送给她的邮件服务器，在那里该报文被放在报文队列中
3. 运行在Alice的邮件服务器上的SMTP客户端发现了报文队列中有这个报文，它就创建一个TCP连接到Bob的邮件服务器上的SMTP服务器
4. 在经过一些初始的SMTP握手后，SMTP客户通过该TCP连接发送Alice的报文
5. 在Bob的邮件服务器上，SMTP的服务器端接收该报文。Bob的邮件服务器然后将该报文放入Bob的邮箱中
6. 在Bob方便的时候，他使用用户代理阅读该报文

关于电子邮件的协议还有POP3、IMAP，在这里不作展开

### DNS服务

因特网的主机使用主机名（如www.google.com）或IP地址进行标识。人们喜欢便于记忆的主机名标识方式，而IP地址是供路由器解析用的。DNS（Domain Name System）域名系统的作用即是进行**主机名到IP地址转换**。

DNS是一个由分层的DNS服务器实现的分布式数据库；一个使得主机能够查询分布式数据库的应用层协议

DNS协议运行在UDP之上，同时占用TCP和UDP的53号端口

